# 你画我猜游戏 - 1panel部署指南

## 项目概述
这是一个基于React和Socket.io开发的网页版你画我猜游戏，包含前端和后端两个部分。

## 部署准备
1. 确保你的服务器已经安装了1panel面板
2. 确保服务器已经安装了Docker和Docker Compose
3. 确保服务器开放了80端口（前端访问）和3001端口（后端服务）

## 部署步骤

### 方法一：使用Docker Compose部署（推荐）

1. **登录1panel面板**
   - 打开浏览器，访问你的1panel面板地址（通常是 http://服务器IP:10086）
   - 使用用户名和密码登录

2. **创建新应用**
   - 在左侧菜单中点击「应用商店」
   - 点击右上角「创建应用」
   - 选择「Docker Compose」部署方式

3. **配置应用信息**
   - 应用名称：draw-guess-game
   - 部署路径：/opt/draw-guess-game
   - 点击「下一步」

4. **上传Docker Compose文件**
   - 选择「上传文件」
   - 上传项目根目录下的 `docker-compose.yml` 文件
   - 点击「下一步」

5. **配置端口映射**
   - 前端端口：80 → 80（保持默认）
   - 后端端口：3001 → 3001（保持默认）
   - 点击「下一步」

6. **配置环境变量**（可选）
   - 如果需要自定义配置，可以在这里添加环境变量
   - 点击「下一步」

7. **确认部署**
   - 检查配置信息是否正确
   - 点击「部署」

8. **等待部署完成**
   - 1panel会自动构建和启动容器
   - 部署完成后，点击「查看应用」可以看到应用状态

### 方法二：手动部署

1. **登录服务器**
   - 使用SSH工具登录你的服务器

2. **创建项目目录**
   ```bash
   mkdir -p /opt/draw-guess-game
   cd /opt/draw-guess-game
   ```

3. **上传项目文件**
   - 使用SCP或FTP工具将项目文件上传到服务器
   - 确保包含以下文件和目录：
     - client/（前端代码）
     - server/（后端代码）
     - docker-compose.yml

4. **构建和启动容器**
   ```bash
   docker-compose up -d
   ```

5. **检查容器状态**
   ```bash
   docker-compose ps
   ```

## 访问应用
部署完成后，你可以通过以下方式访问应用：
- 前端地址：http://服务器IP
- 后端API：http://服务器IP:3001

## 查看日志

### 在1panel面板中查看
1. 进入应用详情页
2. 点击「日志」标签页
3. 可以查看前端和后端的日志

### 命令行查看
```bash
docker-compose logs -f
```

## 停止和重启应用

### 在1panel面板中操作
1. 进入应用详情页
2. 点击「停止」或「重启」按钮

### 命令行操作
```bash
# 停止应用
docker-compose down

# 重启应用
docker-compose restart
```

## 更新应用

1. **更新代码**
   - 使用SCP或FTP工具将新的代码上传到服务器

2. **重新构建和启动容器**
   ```bash
docker-compose up -d --build
```

## 常见问题

### 1. 应用无法访问
- 检查服务器防火墙是否开放了80和3001端口
- 检查容器是否正常运行：`docker-compose ps`
- 查看日志：`docker-compose logs -f`

### 2. 前端无法连接到后端
- 检查docker-compose.yml中的网络配置
- 检查Nginx配置文件中的代理设置
- 查看前端和后端的日志

### 3. 容器启动失败
- 查看详细日志：`docker-compose logs -f`
- 检查Dockerfile和docker-compose.yml的配置是否正确
- 确保服务器资源充足（CPU、内存、磁盘空间）

## 技术支持
如果遇到问题，可以通过以下方式获取帮助：
- 查看项目代码和配置文件
- 检查容器日志
- 参考1panel官方文档

---

**部署成功后，你就可以通过浏览器访问 http://服务器IP 来使用你画我猜游戏了！**
